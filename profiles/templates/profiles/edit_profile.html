{% extends "base.html" %}
{% load static %}

{% block page_header %}
    <div class="container header-container">
        <div class="row">
            <div class="col">
                <h1 class="text-center title-text my-3">Edit your profile</h1>
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="overlay"></div>
    <div class="container page-contents">
        <div class="row">
            <div class="col-12">
                <form method="POST" action="{% url 'edit_profile' %}" class="form" enctype="multipart/form-data">
                    {% csrf_token %}
                    {% for field in form %}
                        {% if field.name != 'image' %}
                            {{ field | as_crispy_field }}
                        {% else %}
                            <p>Current Image*</p>
                            <div class="current-image-container" id="current-image-container">
                                {% if profile.image %}
                                    <img class="mb-3" src="{{ MEDIA_URL }}{{ profile.image }}" alt="image for {{ lesson.lesson_name }}" width="100" height="100" id="current-image">
                                {% endif %}
                            </div>
                            <div id="change-image">
                                <label for="id_image" id="id_image_label" class="btn btn-custom-darken">Change Image</label>
                                {{ field }}
                            </div>
                        {% endif %}
                    {% endfor %}
                    <a href="{% url 'profile' %}" class="btn btn-custom-invert">Cancel</a>
                    <input class="btn btn-custom-darken" type="Submit" value="Update">
                </form>
            </div>
        </div>
    </div>
{% endblock %}

{% block postloadjs %}
    {{ block.super }}
    <script src="{% static 'lessons/js/form_file_changer.js' %}"></script>
{% endblock %}