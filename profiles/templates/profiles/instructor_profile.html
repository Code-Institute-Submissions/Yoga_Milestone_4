{% extends "base.html" %}
{% load static %}

{% block page_header %}
    <div class="container container-header">
        <div class="row">
            <div class="col">

            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="overlay"></div>
    <div class="container h-100">
        <div class="row h-100">
            <div class="col">
                <h1>Instructor:  {{ instructor_profile }}</h1>
                <div class="accordion" id="accordionExample">
                    {% for lesson in lessons %}
                        {% include 'lessons/snippets/lesson_card.html' %}
                    {% endfor %}  
                </div>
            </div>
        </div>
    </div>
{% endblock %}


{% block postloadjs %}
    {{ block.super }}
    <script type="text/javascript">
        function subscribe(subscribe, lesson_id) {
            $.ajax({
                type:"GET",
                url:"/lessons/unsubscribe_lesson",
                data:{  
                      subscribe: subscribe,
                      lesson_id: lesson_id,
                    },
                success: function(json_response){
                    if (json_response['subscription_status'] == 'unsubscribed') {
                        // Unsub button
                        $('#unsubscribe_lesson_button_id_'+lesson_id).hide();
                        // Sub button
                        $('#subscribe_lesson_button_id_'+lesson_id).removeAttr('hidden');
                        $('#subscribe_lesson_button_id_'+lesson_id).show();
                        // Start Lesson button
                        $('#start_lesson_button_id_'+lesson_id).hide();
                    } else if (json_response['subscription_status'] == 'subscribed') {
                        // Unsub button
                        $('#unsubscribe_lesson_button_id_'+lesson_id).removeAttr('hidden');
                        $('#unsubscribe_lesson_button_id_'+lesson_id).show();
                        // Sub button
                        $('#subscribe_lesson_button_id_'+lesson_id).hide();
                        // Start Lesson button
                        $('#start_lesson_button_id_'+lesson_id).removeAttr('hidden');
                        $('#start_lesson_button_id_'+lesson_id).show();
                    }
                }
            })
        }
    </script>
{% endblock %}